<!-- SPDX-License-Identifier: MIT -->
<!-- GitHub link: https://github.com/Sedeniono/ADO-History-Diff -->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>History</title>
    <style>
        body {
            /* Set same default font as in ADO: https://developer.microsoft.com/en-us/azure-devops/develop/styles */
            font-family: "Segoe UI", "-apple-system", BlinkMacSystemFont, Roboto, "Helvetica Neue", Helvetica, Ubuntu, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            -webkit-font-smoothing: antialiased;
            font-size: 14px;
            font-weight: 400;
        }
        img {
            /* If the user simply pasted an image into e.g. the description field without dragging on the scale handles,
            it ends up with its original size in our history diff. Prevent that the image is wider than the extension's iframe. */
            max-width:100%;
        }
        del.diff-class {
            display: inline-block;
            text-decoration: none;
            position: relative;
            padding : 1px 0.3em 1px;
            /* Note: Will be changed dynamically if dark mode is detected; see comment in IsDarkModeActive(). */
            background-color: #fbb;
        }
        ins.diff-class {
            display: inline-block;
            text-decoration: none;
            position: relative;
            padding: 1px 0.3em 1px;
            /* Note: Will be changed dynamically if dark mode is detected; see comment in IsDarkModeActive(). */
            background-color: #d4fcbc;
        }
        li > * {
            /* Because of the inline-block for <ins> and <del>, we need to explicitly align the bullets/numbers of lists to the top */
            vertical-align: text-top;
        }
        table.diff-class {
            border-collapse: collapse;
        }
        td.diff-class {
            text-align: left;
            vertical-align: top;
            padding: 4px 15px 0 0;
        }
        table tr td.diff-class:nth-child(2) { 
            /* Ensure that content cells span to the right, mainly so that cutout-borders look good. */
            width: 100%;
        }
        th.diff-class {            
            text-align: left;
            padding: 0 15px 0 0;
        }
        thead.diff-class { 
            border-bottom: 1px solid; 
        }
        tbody tr.diff-class:nth-child(even) {
            /* https://developer.microsoft.com/en-us/azure-devops/develop/styles */
            background-color: rgb(var(--palette-neutral-4, 244, 244, 244));
        }
        div.update-header {
            /* https://developer.microsoft.com/en-us/azure-devops/develop/styles */
            background-color: rgb(var(--palette-neutral-4, 244, 244, 244));
            border-color: rgb(var(--palette-neutral-8, 234, 234, 234));
            font-size: 1.05em; 
            border-width: 2px; 
            border-style: solid; 
            display: inline-block; 
            padding : 1px 0.3em 1px; 
            margin-bottom: 3px;
        }
        div.full-single-update {
            padding-bottom: 10px;
        }
        .inline-avatar {
            display: inline-block;
            height: 1em;
            width: auto;
            transform: translate(0, 0.1em);
        }
        a {
            /* https://developer.microsoft.com/en-us/azure-devops/develop/styles */
            color: var(--communication-foreground, rgb(0, 90, 158));
        }

        .cutout-base {
            /* background-color: #c0c0c0;  */
        }
        .cutout-border-base {
            background-color: #fff2e0;
            height: 20px;
            color: #c8c8c8;
            position: relative;
            display: flex;
            align-items: center;;
        }
        .cutout-border-at-top {
            border-bottom: 1px solid black;
        }
        .cutout-border-at-bottom {
            border-top: 1px solid black;
        }
        .cutout-border-in-middle {
            border-top: 1px solid black;
            border-bottom: 1px solid black;
        }

        /* All the dialog and button/input stuff: Try to mimic the ADO style. We could also use the official dialog 
        (https://developer.microsoft.com/en-us/azure-devops/components/dialog), but then we get a large amount of
        additional package dependencies that don't seem to be worth it at the moment. */
        dialog {
            color: var(--text-primary-color,rgba(0, 0, 0, .9));
            background-color: var(--background-color,rgba(255, 255, 255, 1));
            border: none;
            box-shadow: 0 25.6px 57.6px var(--panel-shadow-color, rgba(0, 0, 0, .22)), 0 4.8px 14.4px var(--panel-shadow-secondary-color, rgba(0, 0, 0, .18));
        }
        dialog::backdrop {
            background-color: var(--palette-black-alpha-20,rgba(0, 0, 0, .2));
        }
        button {
            user-select: none;
            color: var(--text-primary-color, rgba(0, 0, 0, .9));
            background-color: rgba(var(--palette-neutral-4,244, 244, 244),1);
            border: 1px solid;
            border-color: rgba(var(--palette-neutral-4,244, 244, 244),1);
            outline: 0;    
            height: 32px;
            padding: 0 20px;
            vertical-align: middle;
        }
        button:hover {
            border-color: rgba(var(--palette-neutral-8, 234, 234, 234), 1);
            background-color: rgba(var(--palette-neutral-8, 234, 234, 234), 1);
            color: var(--text-primary-color, rgba(0, 0, 0, .9));
        }
        button:active {
            border-color: var(--communication-background, rgba(0, 120, 212, 1));
            background-color: var(--communication-background, rgba(0, 120, 212, 1));
            color: rgba(var(--palette-neutral-0, 255, 255, 255), 1);
        }
        button.delete-filter {
            height: 22px;
            line-height: 22px;
            padding: 0 10px;
            margin: 1px 0 0 5px;
        }
        button.img-button-large {
            background-size: 18px;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-flex;
            align-items: center;
        }
        button.img-button-in-cutout-border {
            background-size: 14px;
            background-repeat: no-repeat;
            background-position: center;
            height: 20px; /* Same as cutout-border-base */
            padding: 0 15px;
            margin-right: 5px;
        }
        input {
            color: inherit;
            background-color: rgba(var(--palette-neutral-4,244, 244, 244),1);
            border: 1px solid;
            border-color: rgba(var(--palette-neutral-4,244, 244, 244),1);
        }
        label {
            display: inline-block; 
            white-space: nowrap;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    <div style="position: absolute; top: 15px; right: 10px">
        <button id="toggle-context" class="img-button-large">Toggle context</button>
        <button id="config-dialog-show" class="img-button-large" title="Open settings">Settings</button>
    </div>
    <dialog id="config-dialog" style="margin: 0; left: auto; right: 5px; top: 5px">
        <label for="config-dialog-show-unchanged-lines">
            <span><b>Show unchanged lines:</b></span>
            <input id="config-dialog-show-unchanged-lines" type="checkbox" 
                title="If checked, all lines are shown. If unchecked, only lines containing inserted or removed content and the configured number of context lines above/below are shown.">
        </label>
        <br>
        <label for="config-dialog-num-context-lines">
            <span><b>Number of context lines:</b></span>
            <input id="config-dialog-num-context-lines" type="number" min="0" placeholder="Number of context lines"
                title="The number of context lines to show above and below of changed lines. Only relevant if 'Show unchanged lines' is checked." 
                style="width: 50px">
        </label>
        <hr>
        <label for="config-dialog-disable-all-field-filters" style="margin-top: 8px">
            <span><b>Disable all field filters:</b></span>
            <input id="config-dialog-disable-all-field-filters" type="checkbox">
        </label>
        <br>
        <b>Hide fields matching any of:</b><br>
        (case-insensitive; * means any characters)
        <table id="config-dialog-field-filters-table" style="border-spacing: 0; margin-top: 5px; margin-bottom: 5px"></table>
        <datalist id="config-dialog-suggested-fields"></datalist>
        <button id="config-dialog-add-field-filter">Add filter</button>
        <div style="float:right">
            <button id="config-dialog-ok">OK</button>
            <button id="config-dialog-cancel">Cancel</button>
        </div>
    </dialog>
    <div id="html-div-diff"></div>
    <p style="font-size: 0.7em; margin-top: 2em;">Generated by the ADO History Diff extension (<a href="https://github.com/Sedeniono/ADO-History-Diff" target="_blank" rel="noopener noreferrer">GitHub</a>, <a href="../LICENSE">license</a>). Dependencies' <a href="dependencies.licenses.txt">licenses</a>.</p>
</body>

</html>